<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=9">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js" type="text/javascript"></script>
  <script src="extensions.js" type="text/javascript"></script>
  <script src="point.js" type="text/javascript"></script>
  <script src="easings.js" type="text/javascript"></script>
  <script src="animhelper.js" type="text/javascript"></script>
  <script src="task.js" type="text/javascript"></script>
  <script src="datamanager.js" type="text/javascript"></script>
  <script src="eventmanager.js" type="text/javascript"></script>
  <script src="chart.js" type="text/javascript"></script>
  <style type="text/css">
    body {
      font-family: 'Helvetica Neue', Georgia, serif;
      padding:10px;
    }

    .hide {
      display: none;
    }

    .container {
      width: 500px;
    }

    .instructions {
      position: absolute;
      top:120px;
      left: 50px;      
      font-size:0.9em;
    }

    .instructions ul li {
      list-style-type: circle;
    }

    .left {
      float:left;
    }

    .clear {
      clear:both;
    }
  </style>
</head>
<body>
  <h1>Data driven Donut Chart</h1>
  <h5>(work in progress....)</h5>  
   <div class="instructions">
     <ul>
       <li>Click on one of the rings to drill in.</li>
       <li>Click in the center to drill out.</li>
     </ul>
  </div>
  <div class="left container" style="padding:0 50px 0 0;">
    <p style="padding:100px 20px 0 0;line-height:2em">   
      This chart is drawn leveraging HTML5 canvas element. All the interactions and animations are custom written in javascript (without using any animation libraries). The goal of this project is to learn the canvas api, implement an animation helper and a task scheduler to smoothly run zoom-in and zoom-out animations.
    </p>    
  </div>
  <div class="left container">
    <canvas id="allocationChart" width=400 height=400></canvas>   
  </div>

  <script type="text/javascript">


    function initializeAllocationChart() {

      var allocationData = {
        name: "Total Allocation",
        items: [{
                name: "Health Care",
                value: 40,
                primaryColor: "hsl(145, 63%, 49%)",
                secondaryColor: "hsla(145, 63%, 49%, 0.5)",
                items: [{
                  name: "BioTechnology",
                  value: 15,
                  primaryColor: "hsl(50, 77%, 57%)",
                  secondaryColor: "#A0FF5C",
                  items: [{
                            name: "Alocobra Ltd (ADHD)",
                            value: 2,
                            primaryColor: "hsl(50, 88%, 73%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Compugen Ltd (CGEN)",
                            value: 1.5,
                            primaryColor: "hsl(50, 77%, 62%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "IBio Inc (ILMN)",
                            value: 6,
                            primaryColor: "hsl(50, 54%, 46%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Illuminia Inc (ILMN)",
                            value: 2,
                            primaryColor: "hsl(50, 85%, 55%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Novavax (NVV)",
                            value: 0.5,
                            primaryColor: "hsl(50, 84%, 75%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "NeuroSearch(NRS)",
                            value: 2,
                            primaryColor: "hsl(50, 92%, 47%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "OxiGene Inc (OXGN)",
                            value: 0.5,
                            primaryColor: "hsl(50, 96%, 50%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Stem Cells Inc (STEM)",
                            value: 0.5,
                            primaryColor: "hsl(50, 100%, 67%)",
                            secondaryColor: "#68f800",
                          }]
                },
                {
                  name: "Drug Manufacturers",
                  value: 8,
                  primaryColor: "hsl(65, 77%, 57%)",
                  secondaryColor: "#5CFFB6",
                  items: [{
                            name: "Cipla Ltd (CIPLA)",
                            value: 5,
                            primaryColor: "hsl(65, 91%, 64%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "GlaxoSmithKline Pharma (GLAXO)",
                            value: 1,
                            primaryColor: "hsl(65, 90%, 40%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Merck & Co (MERCK)",
                            value: 2,
                            primaryColor: "hsl(65, 62%, 53%)",
                            secondaryColor: "#68f800",
                          }]
                },
                {
                  name: "Health Care Plans",
                  value: 5,
                  primaryColor: "hsl(85, 77%, 57%)",
                  secondaryColor: "#68f800",
                  items: [{
                            name: "Aetna (AET)",
                            value: 0.4,
                            primaryColor: "hsl(85, 60%, 79%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Cigna Corp (CI)",
                            value: 1,
                            primaryColor: "hsl(85, 82%, 70%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Express Scripts (ESRX)",
                            value: 1,
                            primaryColor: "hsl(85, 86%, 46%)",
                            secondaryColor: "#68f800",
                          },
                          {
                            name: "Humana (HUM)",
                            value: 0.6,
                            primaryColor: "hsl(85, 53%, 33%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Health Net, Inc (HUM)",
                            value: 1,
                            primaryColor: "hsl(85, 94%, 35%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "WellPoint (WLP)",
                            value: 1,
                            primaryColor: "hsl(85, 97%, 52%)",
                            secondaryColor: "#68f800",
                          }]
                },
                {
                  name: "Drugs - Generic",
                  value: 4,
                  primaryColor: "hsl(130, 77%, 57%)",
                  secondaryColor: "#5CFFB6",
                  items: [{
                            name: "Actavis Inc (ACT)",
                            value: 0.2,
                            primaryColor: "hsl(130, 91%, 78%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Akorn Inc (AKRX)",
                            value: 0.6,
                            primaryColor: "hsl(130, 47%, 48%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Biomm S.A (ESRX)",
                            value: 1.2,
                            primaryColor: "hsl(130, 72%, 52%)",
                            secondaryColor: "#68f800",
                          },
                          {
                            name: "Evotec (EVT)",
                            value: 1.5,
                            primaryColor: "hsl(130, 97%, 56%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Merck (MRK)",
                            value: 0.5,
                            primaryColor: "hsl(130, 83%, 34%)",
                            secondaryColor: "#5CFFB6",
                          }]
                },
                {
                  name: "Hospitals",
                  value: 6,
                  primaryColor: "hsl(160, 77%, 57%)",
                  secondaryColor: "#68f800",
                  items: [{
                            name: "Apollo (APOLLOHOS)",
                            value: 3,
                            primaryColor: "hsl(160, 84%, 75%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "CardioNet, Inc (C25)",
                            value: 2,
                            primaryColor: "hsl(160, 45%, 63%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Hanger Inc",
                            value: 0.25,
                            primaryColor: "hsl(160, 81%, 86%)",
                            secondaryColor: "#68f800",
                          },
                          {
                            name: "MedNax",
                            value: 0.25,
                            primaryColor: "hsl(160, 58%, 59%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Omnicare, Inc",
                            value: 0.4,
                            primaryColor: "hsl(160, 75%, 42%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "Vision Group Holdings Ltd",
                            value: 0.1,
                            primaryColor: "hsl(160, 84%, 28%)",
                            secondaryColor: "#68f800",
                          }]
                },
                {
                  name: "Home Health Care",
                  value: 2,
                  primaryColor: "hsl(185, 77%, 57%)",
                  secondaryColor: "#5CFFB6",
                  items: [{
                            name: "Chemed Corp (CHE)",
                            value: 0.6,
                            primaryColor: "hsl(185, 95%, 76%)",
                            secondaryColor: "#A0FF5C",
                          },
                          {
                            name: "Electromed, Inc",
                            value: 0.6,
                            primaryColor: "hsl(185, 6%, 43%)",
                            secondaryColor: "#5CFFB6",
                          },
                          {
                            name: "LHC Group, Inc",
                            value: 0.8,
                            primaryColor: "hsl(185, 46%, 65%)",
                            secondaryColor: "#68f800",
                          }]
                }]

            }, {
                name: "Technology",
                value: 35,
                primaryColor: "#F39c12",
                secondaryColor: "#F7BE63",
                items: [{
                  name: "Application Software",
                  value: 20,
                  primaryColor: "hsl(17, 90%, 51%)",
                  secondaryColor: "#F9A87A",
                  items: [{
                       name: "Adobe Systems (ADBE)",
                       value: 5,
                       primaryColor: "hsl(17, 100%, 78%)",
                       secondaryColor: "#f8cf73"
                    },
                    {
                       name: "BMC Software, Inc(BMC)",
                       value: 2,
                       primaryColor: "hsl(17, 73%, 62%)",
                       secondaryColor: "#d7997d"
                    },
                    {
                       name: "F5 Metworks (FFIV)",
                       value: 3,
                       primaryColor: "hsl(17, 80%, 39%)",
                       secondaryColor: "#f99366"
                    },
                    {
                       name: "Real Networks Inc (RNWK)",
                       value: 0.5,
                       primaryColor: "hsl(17, 53%, 60%)",
                       secondaryColor: "#fba47d"
                    },
                    {
                       name: "Red Hat, Inc (RHT)",
                       value: 0.5,
                       primaryColor: "hsl(17, 49%, 34%)",
                       secondaryColor: "#fbafab"
                    },
                    {
                       name: "Rosetta Stone (RST)",
                       value: 2,
                       primaryColor: "hsl(17, 53%, 50%)",
                       secondaryColor: "#f99366"
                    },
                    {
                       name: "Splunk (SPLK)",
                       value: 7,
                       primaryColor: "hsl(17, 96%, 50%)",
                       secondaryColor: "#fba47d"
                    }]                  
                 },
                 {
                  name: "Business Software",
                  value: 3,
                  primaryColor: "hsl(27, 80%, 51%)",
                  secondaryColor: "#F9DD7A",
                  items: [{
                        name: "Amdocs Ltd",
                        value: 0.2,
                        primaryColor: "hsl(27, 54%, 71%)",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "CA, Inc",
                        value: 0.1,
                        primaryColor: "hsl(27, 93%, 35%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Citrix Systems",
                        value: 0.5,
                        primaryColor: "hsl(27, 91%, 50%)",
                        secondaryColor: "#68f800",
                      },
                      {
                        name: "Iron Mountain Inc",
                        value: 0.8,
                        primaryColor: "hsl(27, 68%, 55%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Oracle Corporation",
                        value: 1,
                        primaryColor: "hsl(27, 89%, 75%)",
                        secondaryColor: "#68f800",
                      },
                      {
                        name: "Xerox, Ltd",
                        value: 0.4,
                        primaryColor: "hsl(27, 43%, 39%)",
                        secondaryColor: "#68f800",
                      }]                  
                 },
                 {
                  name: "Internet Software",
                  value: 7,
                  primaryColor: "hsl(37, 70%, 51%)",
                  secondaryColor: "#F9DD7A",
                  items: [{
                        name: "Angie's List",
                        value: 0.5,
                        primaryColor: "hsl(37, 88%, 68%)",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "Salesforce.com",
                        value: 4,
                        primaryColor: "hsl(37, 45%, 53%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Google",
                        value: 1.7,
                        primaryColor: "hsl(37, 95%, 46%)",
                        secondaryColor: "#68f800",
                      },
                      {
                        name: "NetEase",
                        value: 0.4,
                        primaryColor: "hsl(37, 84%, 37%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Zillow, Inc",
                        value: 0.4,
                        primaryColor: "hsl(37, 100%, 60%)",
                        secondaryColor: "#68f800",
                      }]                  
                 },
                 {
                  name: "Personal Computers",
                  value: 3,
                  primaryColor: "hsl(21, 70%, 47%)",
                  secondaryColor: "#F9DD7A",
                  items: [{
                        name: "Dell",
                        value: 1,
                        primaryColor: "hsl(21, 98%, 70%)",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "HP",
                        value: 1,
                        primaryColor: "hsl(21, 79%, 35%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Lenovo",
                        value: 1,
                        primaryColor: "hsl(21, 83%, 51%)",
                        secondaryColor: "#68f800",
                      }]                  
                 },
                 {
                  name: "Semiconductor",
                  value: 2,
                  primaryColor: "hsl(10, 80%, 57%)",
                  secondaryColor: "#F9DD7A",
                  items: [{
                        name: "ARM",
                        value: 1,
                        primaryColor: "hsl(10, 98%, 70%)",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "AMD",
                        value: 0.2,
                        primaryColor: "hsl(10, 88%, 56%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Intel",
                        value: 0.7,
                        primaryColor: "hsl(10, 68%, 45%)",
                        secondaryColor: "#68f800",
                      },                      
                      {
                        name: "NetLogic",
                        value: 0.1,
                        primaryColor: "hsl(10, 46%, 42%)",
                        secondaryColor: "#68f800",
                      }]                  
                 }]
            },
            {
                name: "Financials",
                value: 25,
                primaryColor: "hsl(6, 78%, 57%)",
                secondaryColor: "hsla(6, 78%, 57%, 0.5)",
                items: [{
                  name: "Asset Management",
                  value: 20,
                  primaryColor: "hsl(0, 61%, 53%)",
                  secondaryColor: "#E77381",
                  items: [{
                        name: "Blackrock, Inc",
                        value: 12,
                        primaryColor: "hsl(0, 73%, 70%)",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "Janus Capital Group",
                        value: 2,
                        primaryColor: "hsl(0, 45%, 45%)",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Legg Mason, Inc",
                        value: 5,
                        primaryColor: "hsl(0, 85%, 44%)",
                        secondaryColor: "#68f800",
                      },                      
                      {
                        name: "Solar Capital",
                        value: 1,
                        primaryColor: "hsl(0, 87%, 60%)",
                        secondaryColor: "#68f800",
                      }]   
                 },
                 {
                  name: "Investment Brokers",
                  value: 5,
                  primaryColor: "hsl(351, 98%, 66%)",
                  secondaryColor: "#ED896E",
                  items: [{
                        name: "Charles Schwab Corp",
                        value: 3.9,
                        primaryColor: "hsl(351, 66%, 68%);",
                        secondaryColor: "#A0FF5C",
                      },
                      {
                        name: "E*Trade Financial Corp",
                        value: 1,
                        primaryColor: "hsl(351, 74%, 53%);",
                        secondaryColor: "#5CFFB6",
                      },
                      {
                        name: "Paulson Capital Corp",
                        value: 0.1,
                        primaryColor: "hsl(351, 82%, 37%);",
                        secondaryColor: "#5CFFB6",
                      }]   
                 }]
            }]}; 

      var dataManager = new donut.DataManager(allocationData);
      var eventManager = new donut.EventManager($("#allocationChart")); 
      var chart = new donut.Chart($("#allocationChart"), dataManager, eventManager);
      chart.render();
    }

    initializeAllocationChart();

    

  </script>
</body>
</html>

  